{% extends "base.html" %}

{% block content %}
  <h1>Character: {{ character.name }}</h1>
  <p>Gender: {{ character.gender }}</p>
  <p>Description: {{ character.description }}</p>
  <p>Agency: <a href="{% url 'actors_agency:agency-detail' character.agency.id %}">{{ character.agency.name }}</a></p>

  <!-- Booking button -->
  <form action="{% url 'actors_agency:book-character' character.id %}" method="POST">
    {% csrf_token %}
    <button type="submit" 
            class="btn btn-custom"
            {% if actor_is_booked or character_is_booked or is_different_gender %}
            disabled
            {% endif %}>
      Book Character
    </button>
  </form>

  <!-- Error messages -->
  <div class="mt-3">
    {% if is_different_gender %}
      <p class="text-danger">Error: You cannot book this character because their gender does not match yours.</p>
    {% endif %}
    {% if actor_is_booked %}
      <p class="text-danger">Error: You cannot book this character because you already have another character booked. Please release your current character before booking a new one.</p>
    {% endif %}
    {% if character_is_booked %}
      <p class="text-danger">Error: This character is already booked by another actor.</p>
    {% endif %}
  </div>
{% endblock %}
